<!DOCTYPE HTML>
<html>
    <head>
        <link rel="stylesheet" href="https://carstenschaefer.github.io/DrawerJs/assets/font-awesome.min.css" />
        <link rel="stylesheet" href="https://carstenschaefer.github.io/DrawerJs/dist/drawerJs.css" />
        <style>
            #canvas-editor {
                margin-top: 50px;
                margin-left: 50px;
            }
        </style>
    </head>
    <body>
        <div id="canvas-editor">
            
        </div>
        <button onclick="downloadImage()">Save</button>
        <script src="https://carstenschaefer.github.io/DrawerJs/lib/jquery-1.10.1.min.js"></script>
        <script src="https://carstenschaefer.github.io/DrawerJs/dist/drawerJs.standalone.js"></script>
        <script src="drawerLocalization.js"></script>
        <script src="drawerJsConfig.js"></script>
        <script src="download.js"></script>
        <script>
            var downloadImage;
            $(document).ready(function () {
                var drawer = new DrawerJs.Drawer(null, {
                    texts: customLocalization,
                    plugins: drawerPlugins,
                    pluginsConfig:{
                        scaleDownLargeImage: true,
                        maxImageSizeKb: 10240,
                        acceptedMIMETypes: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'],
                        cropIsActive: true
                    },
                    defaultImageUrl: 'https://ronakiihglobal.github.io/drawerjs/image.jpg',
                    defaultActivePlugin : { name : 'Pencil', mode : 'lastUsed'},
                }, 600, 600);
                $('#canvas-editor').append(drawer.getHtml());
                drawer.onInsert();
                drawer.api.startEditing();
                drawer.api.addImageFromUrl('https://ronakiihglobal.github.io/drawerjs/image.jpg', {'centerImage': true, 'scaleX': 2, 'scaleY': 2})

                drawer.fCanvas.on('after:render', function(){ 
                    var ssJson = {
  "objects": [
    {
      "type": "ErasablePath",
      "originX": "center",
      "originY": "center",
      "left": 366,
      "top": 327,
      "width": 1,
      "height": 0,
      "fill": null,
      "stroke": "#E80F07",
      "strokeWidth": 2,
      "strokeDashArray": null,
      "strokeLineCap": "round",
      "strokeLineJoin": "round",
      "strokeMiterLimit": 10,
      "scaleX": 1,
      "scaleY": 1,
      "angle": 0,
      "flipX": false,
      "flipY": false,
      "opacity": 1,
      "shadow": null,
      "visible": true,
      "clipTo": null,
      "backgroundColor": "",
      "fillRule": "nonzero",
      "globalCompositeOperation": "source-over",
      "transformMatrix": null,
      "skewX": 0,
      "skewY": 0,
      "pathOffset": {
        "x": 366,
        "y": 327
      },
      "path": [
        [
          "M",
          365.5,
          327
        ],
        [
          "Q",
          365.5,
          327,
          366,
          327
        ],
        [
          "L",
          366.5,
          327
        ]
      ],
      "eraserPaths": []
    },
    {
      "type": "ErasablePath",
      "originX": "center",
      "originY": "center",
      "left": 228,
      "top": 174.5,
      "width": 320,
      "height": 283,
      "fill": null,
      "stroke": "#E80F07",
      "strokeWidth": 2,
      "strokeDashArray": null,
      "strokeLineCap": "round",
      "strokeLineJoin": "round",
      "strokeMiterLimit": 10,
      "scaleX": 1,
      "scaleY": 1,
      "angle": 0,
      "flipX": false,
      "flipY": false,
      "opacity": 1,
      "shadow": null,
      "visible": true,
      "clipTo": null,
      "backgroundColor": "",
      "fillRule": "nonzero",
      "globalCompositeOperation": "source-over",
      "transformMatrix": null,
      "skewX": 0,
      "skewY": 0,
      "pathOffset": {
        "x": 228,
        "y": 174.5
      },
      "path": [
        [
          "M",
          110.5,
          46
        ],
        [
          "Q",
          110.5,
          46,
          111,
          46
        ],
        [
          "Q",
          111.5,
          46,
          110.25,
          46
        ],
        [
          "Q",
          109,
          46,
          109,
          47
        ],
        [
          "Q",
          109,
          48,
          108.5,
          48.5
        ],
        [
          "Q",
          108,
          49,
          107,
          49.5
        ],
        [
          "Q",
          106,
          50,
          105,
          51
        ],
        [
          "Q",
          104,
          52,
          103,
          52.5
        ],
        [
          "Q",
          102,
          53,
          101,
          54
        ],
        [
          "Q",
          100,
          55,
          99.5,
          55.5
        ],
        [
          "Q",
          99,
          56,
          98.5,
          56.5
        ],
        [
          "Q",
          98,
          57,
          97.5,
          58.5
        ],
        [
          "Q",
          97,
          60,
          96,
          60.5
        ],
        [
          "Q",
          95,
          61,
          95,
          62
        ],
        [
          "Q",
          95,
          63,
          95,
          64.5
        ],
        [
          "Q",
          95,
          66,
          94,
          67
        ],
        [
          "Q",
          93,
          68,
          92,
          69
        ],
        [
          "Q",
          91,
          70,
          90.5,
          71
        ],
        [
          "Q",
          90,
          72,
          89.5,
          73
        ],
        [
          "Q",
          89,
          74,
          87.5,
          76.5
        ],
        [
          "Q",
          86,
          79,
          85.5,
          80
        ],
        [
          "Q",
          85,
          81,
          84,
          82
        ],
        [
          "Q",
          83,
          83,
          82,
          85.5
        ],
        [
          "Q",
          81,
          88,
          80.5,
          88.5
        ],
        [
          "Q",
          80,
          89,
          79.5,
          90
        ],
        [
          "Q",
          79,
          91,
          78.5,
          92
        ],
        [
          "Q",
          78,
          93,
          77,
          94.5
        ],
        [
          "Q",
          76,
          96,
          75.5,
          97
        ],
        [
          "Q",
          75,
          98,
          75,
          99.5
        ],
        [
          "Q",
          75,
          101,
          75,
          102
        ],
        [
          "Q",
          75,
          103,
          74.5,
          104.5
        ],
        [
          "Q",
          74,
          106,
          73.5,
          106.5
        ],
        [
          "Q",
          73,
          107,
          73,
          108
        ],
        [
          "Q",
          73,
          109,
          73,
          110.5
        ],
        [
          "Q",
          73,
          112,
          72,
          113
        ],
        [
          "Q",
          71,
          114,
          71,
          115
        ],
        [
          "Q",
          71,
          116,
          70.5,
          117.5
        ],
        [
          "Q",
          70,
          119,
          69.5,
          120.5
        ],
        [
          "Q",
          69,
          122,
          69,
          124
        ],
        [
          "Q",
          69,
          126,
          69,
          126.5
        ],
        [
          "Q",
          69,
          127,
          68.5,
          129
        ],
        [
          "Q",
          68,
          131,
          68,
          132
        ],
        [
          "Q",
          68,
          133,
          68,
          134.5
        ],
        [
          "Q",
          68,
          136,
          68,
          137.5
        ],
        [
          "Q",
          68,
          139,
          68,
          140.5
        ],
        [
          "Q",
          68,
          142,
          68,
          143
        ],
        [
          "Q",
          68,
          144,
          68,
          146
        ],
        [
          "Q",
          68,
          148,
          68,
          149.5
        ],
        [
          "Q",
          68,
          151,
          68,
          152.5
        ],
        [
          "Q",
          68,
          154,
          68,
          156
        ],
        [
          "Q",
          68,
          158,
          68,
          159.5
        ],
        [
          "Q",
          68,
          161,
          68,
          162.5
        ],
        [
          "Q",
          68,
          164,
          68,
          166
        ],
        [
          "Q",
          68,
          168,
          68,
          169.5
        ],
        [
          "Q",
          68,
          171,
          68,
          172.5
        ],
        [
          "Q",
          68,
          174,
          68.5,
          175.5
        ],
        [
          "Q",
          69,
          177,
          70,
          179
        ],
        [
          "Q",
          71,
          181,
          71.5,
          182.5
        ],
        [
          "Q",
          72,
          184,
          72.5,
          186
        ],
        [
          "Q",
          73,
          188,
          74.5,
          190.5
        ],
        [
          "Q",
          76,
          193,
          76.5,
          194
        ],
        [
          "Q",
          77,
          195,
          78,
          196.5
        ],
        [
          "Q",
          79,
          198,
          79.5,
          199.5
        ],
        [
          "Q",
          80,
          201,
          81.5,
          203
        ],
        [
          "Q",
          83,
          205,
          83.5,
          207
        ],
        [
          "Q",
          84,
          209,
          85.5,
          211
        ],
        [
          "Q",
          87,
          213,
          88,
          215
        ],
        [
          "Q",
          89,
          217,
          90.5,
          220
        ],
        [
          "Q",
          92,
          223,
          93.5,
          225
        ],
        [
          "Q",
          95,
          227,
          96,
          230
        ],
        [
          "Q",
          97,
          233,
          98.5,
          235
        ],
        [
          "Q",
          100,
          237,
          102,
          240
        ],
        [
          "Q",
          104,
          243,
          106,
          246
        ],
        [
          "Q",
          108,
          249,
          109.5,
          251
        ],
        [
          "Q",
          111,
          253,
          112.5,
          254
        ],
        [
          "Q",
          114,
          255,
          116.5,
          257.5
        ],
        [
          "Q",
          119,
          260,
          120.5,
          261
        ],
        [
          "Q",
          122,
          262,
          123.5,
          264
        ],
        [
          "Q",
          125,
          266,
          128,
          268
        ],
        [
          "Q",
          131,
          270,
          132,
          271.5
        ],
        [
          "Q",
          133,
          273,
          136,
          274.5
        ],
        [
          "Q",
          139,
          276,
          139.5,
          276.5
        ],
        [
          "Q",
          140,
          277,
          142,
          278.5
        ],
        [
          "Q",
          144,
          280,
          146,
          281.5
        ],
        [
          "Q",
          148,
          283,
          149.5,
          283.5
        ],
        [
          "Q",
          151,
          284,
          153,
          286
        ],
        [
          "Q",
          155,
          288,
          157,
          289
        ],
        [
          "Q",
          159,
          290,
          161.5,
          291.5
        ],
        [
          "Q",
          164,
          293,
          166,
          294.5
        ],
        [
          "Q",
          168,
          296,
          170.5,
          297
        ],
        [
          "Q",
          173,
          298,
          175.5,
          300
        ],
        [
          "Q",
          178,
          302,
          180,
          303.5
        ],
        [
          "Q",
          182,
          305,
          185,
          306
        ],
        [
          "Q",
          188,
          307,
          191,
          308.5
        ],
        [
          "Q",
          194,
          310,
          197,
          311
        ],
        [
          "Q",
          200,
          312,
          203,
          312.5
        ],
        [
          "Q",
          206,
          313,
          207,
          313
        ],
        [
          "Q",
          208,
          313,
          211,
          313
        ],
        [
          "Q",
          214,
          313,
          217,
          314.5
        ],
        [
          "Q",
          220,
          316,
          222.5,
          316
        ],
        [
          "Q",
          225,
          316,
          228,
          316
        ],
        [
          "Q",
          231,
          316,
          234.5,
          316
        ],
        [
          "Q",
          238,
          316,
          241,
          316
        ],
        [
          "Q",
          244,
          316,
          249,
          316
        ],
        [
          "Q",
          254,
          316,
          257.5,
          314.5
        ],
        [
          "Q",
          261,
          313,
          267,
          312
        ],
        [
          "Q",
          273,
          311,
          277.5,
          309.5
        ],
        [
          "Q",
          282,
          308,
          287.5,
          306.5
        ],
        [
          "Q",
          293,
          305,
          297.5,
          303
        ],
        [
          "Q",
          302,
          301,
          307.5,
          300.5
        ],
        [
          "Q",
          313,
          300,
          318,
          298.5
        ],
        [
          "Q",
          323,
          297,
          326.5,
          295.5
        ],
        [
          "Q",
          330,
          294,
          335,
          292.5
        ],
        [
          "Q",
          340,
          291,
          342,
          289.5
        ],
        [
          "Q",
          344,
          288,
          347,
          287
        ],
        [
          "Q",
          350,
          286,
          354,
          284.5
        ],
        [
          "Q",
          358,
          283,
          358.5,
          281.5
        ],
        [
          "Q",
          359,
          280,
          361,
          278
        ],
        [
          "Q",
          363,
          276,
          364.5,
          273.5
        ],
        [
          "Q",
          366,
          271,
          368,
          268.5
        ],
        [
          "Q",
          370,
          266,
          370.5,
          265.5
        ],
        [
          "Q",
          371,
          265,
          372,
          263
        ],
        [
          "Q",
          373,
          261,
          374,
          258
        ],
        [
          "Q",
          375,
          255,
          376,
          252.5
        ],
        [
          "Q",
          377,
          250,
          378,
          247
        ],
        [
          "Q",
          379,
          244,
          379.5,
          242
        ],
        [
          "Q",
          380,
          240,
          381,
          236.5
        ],
        [
          "Q",
          382,
          233,
          382.5,
          229.5
        ],
        [
          "Q",
          383,
          226,
          383.5,
          223.5
        ],
        [
          "Q",
          384,
          221,
          384.5,
          217
        ],
        [
          "Q",
          385,
          213,
          385,
          210.5
        ],
        [
          "Q",
          385,
          208,
          386,
          203.5
        ],
        [
          "Q",
          387,
          199,
          387.5,
          196
        ],
        [
          "Q",
          388,
          193,
          388,
          189
        ],
        [
          "Q",
          388,
          185,
          388,
          181.5
        ],
        [
          "Q",
          388,
          178,
          388,
          174.5
        ],
        [
          "Q",
          388,
          171,
          388,
          167.5
        ],
        [
          "Q",
          388,
          164,
          386.5,
          161
        ],
        [
          "Q",
          385,
          158,
          384.5,
          154
        ],
        [
          "Q",
          384,
          150,
          382,
          145
        ],
        [
          "Q",
          380,
          140,
          377,
          136
        ],
        [
          "Q",
          374,
          132,
          373.5,
          129
        ],
        [
          "Q",
          373,
          126,
          371,
          122.5
        ],
        [
          "Q",
          369,
          119,
          367,
          116.5
        ],
        [
          "Q",
          365,
          114,
          362.5,
          109.5
        ],
        [
          "Q",
          360,
          105,
          357,
          102.5
        ],
        [
          "Q",
          354,
          100,
          352,
          96.5
        ],
        [
          "Q",
          350,
          93,
          348,
          91
        ],
        [
          "Q",
          346,
          89,
          342.5,
          85
        ],
        [
          "Q",
          339,
          81,
          336,
          78
        ],
        [
          "Q",
          333,
          75,
          331,
          72.5
        ],
        [
          "Q",
          329,
          70,
          326.5,
          67
        ],
        [
          "Q",
          324,
          64,
          321,
          61.5
        ],
        [
          "Q",
          318,
          59,
          315.5,
          56
        ],
        [
          "Q",
          313,
          53,
          309.5,
          50.5
        ],
        [
          "Q",
          306,
          48,
          303.5,
          46
        ],
        [
          "Q",
          301,
          44,
          299,
          43
        ],
        [
          "Q",
          297,
          42,
          294,
          41
        ],
        [
          "Q",
          291,
          40,
          288,
          38
        ],
        [
          "Q",
          285,
          36,
          282.5,
          35
        ],
        [
          "Q",
          280,
          34,
          277.5,
          34
        ],
        [
          "Q",
          275,
          34,
          271.5,
          34
        ],
        [
          "Q",
          268,
          34,
          263.5,
          33.5
        ],
        [
          "Q",
          259,
          33,
          255,
          33
        ],
        [
          "Q",
          251,
          33,
          246.5,
          33
        ],
        [
          "Q",
          242,
          33,
          237,
          33
        ],
        [
          "Q",
          232,
          33,
          230,
          33
        ],
        [
          "Q",
          228,
          33,
          222.5,
          33
        ],
        [
          "Q",
          217,
          33,
          212.5,
          33
        ],
        [
          "Q",
          208,
          33,
          170,
          35.5
        ],
        [
          "L",
          132,
          38
        ]
      ],
      "eraserPaths": []
    }
  ],
  "background": "",
  "backgroundImage": {
    "type": "image",
    "originX": "left",
    "originY": "top",
    "left": 0,
    "top": 0,
    "width": 602,
    "height": 602,
    "fill": "rgb(0,0,0)",
    "stroke": null,
    "strokeWidth": 0,
    "strokeDashArray": null,
    "strokeLineCap": "butt",
    "strokeLineJoin": "miter",
    "strokeMiterLimit": 10,
    "scaleX": 1,
    "scaleY": 1,
    "angle": 0,
    "flipX": false,
    "flipY": false,
    "opacity": 1,
    "shadow": null,
    "visible": true,
    "clipTo": null,
    "backgroundColor": "",
    "fillRule": "nonzero",
    "globalCompositeOperation": "source-over",
    "transformMatrix": null,
    "skewX": 0,
    "skewY": 0,
    "crossOrigin": "",
    "alignX": "none",
    "alignY": "none",
    "meetOrSlice": "meet",
    "src":"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",
    "filters": [],
    "resizeFilters": []
  }
}
                    //drawer.api.loadCanvasFromData(ssJson)
                });

                downloadImage = function(){
                    var imageData = drawer.api.getCanvasAsImage()
                    //console.log(imageData)
                    var ss = drawer.api.getCanvasAsJSON();
                    console.log(ss)
                    download(imageData)
                }
            });

            
        </script>
    </body>
</html>